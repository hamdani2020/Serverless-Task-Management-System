{"ast":null,"code":"var _jsxFileName = \"/home/user/Task-Manager/task-manager-frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport './index.css';\nimport TaskForm from './components/TaskForm.js';\nimport { useAuth } from \"react-oidc-context\";\nimport { Alert, Snackbar } from \"@mui/material\";\nimport LandingPage from './components/LandingPage.js'; // Add these imports\nimport { AppBar, Toolbar, Typography, Button, Container, TextField, Grid, Card, CardContent, CardActions, Select, MenuItem, FormControl, InputLabel } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const auth = useAuth();\n  const [tasks, setTasks] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [userRole, setUserRole] = useState('');\n  const [newTask, setNewTask] = useState({\n    title: \"\",\n    description: \"\",\n    assignee: \"\",\n    deadline: \"\",\n    status: \"PENDING\"\n  });\n  const [error, setError] = useState(\"\");\n  const [teamMembers, setTeamMembers] = useState([]);\n  const API_URLS = {\n    fetchTask: \"https://71aos5nio2.execute-api.eu-west-1.amazonaws.com/getTask\",\n    createTask: \"https://plaaw9qjn7.execute-api.eu-west-1.amazonaws.com/createTask\",\n    updateTask: \"https://rlyzlu0dl0.execute-api.eu-west-1.amazonaws.com/updateTask\",\n    deleteTask: \"https://1b4916boze.execute-api.eu-west-1.amazonaws.com/delete\",\n    fetchUsers: \"https://your-api-url/getUsers\",\n    sendNotification: \"https://yjja5gnwql.execute-api.eu-west-1.amazonaws.com/sendNotification\"\n  };\n  useEffect(() => {\n    if (auth.isAuthenticated) {\n      fetchUserRole();\n      fetchTasks();\n      if (isAdmin()) {\n        fetchUsers();\n      }\n    }\n  }, [auth.isAuthenticated]);\n  const fetchUserRole = () => {\n    var _auth$user;\n    // In a real application, the username and roles would typically come from your authentication system.\n    const username = (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.profile[\"cognito:username\"];\n    if (username === \"admin\") {\n      // Assign 'ADMIN' role if username matches 'admin'\n      setUserRole(\"ADMIN\");\n      console.log(\"Logged in as admin\");\n    } else {\n      // Default to 'MEMBER' role otherwise\n      setUserRole(\"MEMBER\");\n      console.log(\"Logged in as a normal user without admin privileges\");\n    }\n  };\n  const titleRef = useRef();\n  const descriptionRef = useRef();\n  const assigneeRef = useRef();\n  const deadlineRef = useRef();\n  const isAdmin = () => userRole === 'ADMIN';\n  const fetchUsers = async () => {\n    try {\n      var _auth$user2;\n      const response = await axios.get(API_URLS.fetchUsers, {\n        headers: {\n          Authorization: `Bearer ${(_auth$user2 = auth.user) === null || _auth$user2 === void 0 ? void 0 : _auth$user2.access_token}`\n        }\n      });\n      setUsers(response.data);\n    } catch (err) {\n      setError(\"Failed to fetch users\");\n    }\n  };\n\n  // Add new state for notifications\n  const [notifications, setNotifications] = useState([]);\n  const [showNotification, setShowNotification] = useState(false);\n  const [notificationMessage, setNotificationMessage] = useState(\"\");\n\n  // Function to check if a deadline is approaching (within 3 days)\n  const isDeadlineApproaching = deadline => {\n    const deadlineDate = new Date(deadline);\n    const today = new Date();\n    const diffTime = deadlineDate - today;\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays <= 3 && diffDays >= 0;\n  };\n\n  // Function to check if a deadline has passed\n  const isDeadlinePassed = deadline => {\n    const deadlineDate = new Date(deadline);\n    const today = new Date();\n    return deadlineDate < today;\n  };\n\n  // Function to get card background color based on deadline\n  const getCardColor = (deadline, status) => {\n    if (status === \"COMPLETED\") return \"#e8f5e9\"; // Light green for completed tasks\n    if (isDeadlinePassed(deadline)) return \"#ffebee\"; // Red for passed deadline\n    if (isDeadlineApproaching(deadline)) return \"#fff3e0\"; // Orange for approaching deadline\n    return \"white\"; // Default color\n  };\n\n  // Function to send email notification via SNS\n  const sendDeadlineNotification = async task => {\n    try {\n      const response = await axios.post(API_URLS.sendNotification, {\n        email: task.assignee,\n        taskTitle: task.title,\n        deadline: task.deadline,\n        message: `Task \"${task.title}\" is due on ${new Date(task.deadline).toLocaleDateString()}. Please complete it soon.`\n      });\n      console.log(\"Notification sent successfully:\", response.data);\n    } catch (error) {\n      console.error(\"Failed to send notification:\", error);\n      setError(\"Failed to send email notification\");\n    }\n  };\n  const fetchTasks = async () => {\n    try {\n      var _auth$user3, _auth$user4;\n      const token = (_auth$user3 = auth.user) === null || _auth$user3 === void 0 ? void 0 : _auth$user3.access_token;\n      const url = new URL(API_URLS.fetchTask);\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`Error: ${response.status}`);\n      }\n      const data = await response.json();\n\n      // Filter tasks based on user role and assignee\n      const userEmail = (_auth$user4 = auth.user) === null || _auth$user4 === void 0 ? void 0 : _auth$user4.profile.email;\n      const relevantTasks = isAdmin() ? data : data.filter(task => task.assignee === userEmail);\n\n      // Check for approaching deadlines and send notifications\n      const approachingDeadlines = relevantTasks.filter(task => isDeadlineApproaching(task.deadline) && task.status !== \"COMPLETED\");\n\n      // Send email notifications for approaching deadlines\n      for (const task of approachingDeadlines) {\n        await sendDeadlineNotification(task);\n      }\n\n      // Set UI notifications\n      if (approachingDeadlines.length > 0) {\n        setNotificationMessage(`You have ${approachingDeadlines.length} task(s) with approaching deadlines! Check your email for details.`);\n        setShowNotification(true);\n      }\n      setTasks(relevantTasks);\n    } catch (err) {\n      console.log(err);\n      setError(err.message || \"Failed to fetch tasks\");\n    }\n  };\n  const fetchTeamMembers = async () => {\n    try {\n      const response = await fetch('https://vwjwg4yut4.execute-api.eu-west-1.amazonaws.com/user');\n      if (!response.ok) {\n        throw new Error('Failed to fetch team members');\n      }\n      const data = await response.json();\n      console.log(data);\n      console.log(data.users);\n      const members = data.users.filter(user => user);\n      console.log({\n        members\n      });\n      setTeamMembers(members);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n  const handleCreateTask = async () => {\n    if (!isAdmin()) return;\n    const newTask = {\n      title: titleRef.current.value,\n      description: descriptionRef.current.value,\n      assignee: assigneeRef.current.value,\n      deadline: deadlineRef.current.value,\n      status: \"PENDING\"\n    };\n    try {\n      const response = await axios.post(API_URLS.createTask, newTask, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      setError(\"\");\n      console.log(\"Task created:\", response.data);\n      // Refresh tasks after creating a new one\n      fetchTasks();\n    } catch (err) {\n      setError(\"Failed to create task\");\n    }\n  };\n  const handleUpdateTask = async (taskId, newStatus) => {\n    if (!isAdmin()) return;\n    try {\n      const response = await axios.put(API_URLS.updateTask,\n      // Use TaskID query parameter\n      {\n        status: newStatus,\n        id: taskId\n      },\n      // Payload matches Lambda's expected structure\n      {\n        headers: {\n          \"Content-Type\": \"application/json\"\n          //Authorization: `Bearer ${auth.user?.access_token}`\n        }\n      });\n      const updatedTask = response.data;\n      console.log(updatedTask);\n\n      // Update task state with the new values\n      setTasks(prevTasks => prevTasks.map(task => task.TaskID === taskId ? {\n        ...task,\n        ...updatedTask\n      } : task));\n      console.log(\"Task successfully updated:\", updatedTask);\n    } catch (err) {\n      console.error(\"Failed to update task:\", err.message);\n      setError(\"Failed to update task\");\n    }\n  };\n  const notifyTask = async data => {\n    const response = await fetch(\"https://efd8swtncb.execute-api.eu-west-1.amazonaws.com/notify\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    });\n    const result = await response.json();\n    console.log(result);\n  };\n\n  // Example usage:\n\n  const handleDeleteTask = async taskId => {\n    if (!isAdmin()) return;\n    try {\n      await axios.delete(API_URLS.deleteTask, {\n        data: {\n          TaskID: taskId\n        },\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      setTasks(prevTasks => prevTasks.filter(task => task.TaskID !== taskId));\n    } catch (err) {\n      console.error(err); // Log the error for debugging\n      setError(\"Failed to delete task\");\n    }\n  };\n  useEffect(() => {\n    fetchTeamMembers();\n  }, []);\n  const AdminTaskCreation = () => /*#__PURE__*/_jsxDEV(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      children: \"Create Task\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      fullWidth: true,\n      label: \"Title\",\n      inputRef: titleRef,\n      margin: \"normal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      fullWidth: true,\n      label: \"Description\",\n      inputRef: descriptionRef,\n      margin: \"normal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      fullWidth: true,\n      margin: \"normal\",\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        children: \"Assignee\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        inputRef: assigneeRef,\n        defaultValue: \"\",\n        children: teamMembers.map(user => /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: user.email,\n          children: user.email\n        }, user.email, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      fullWidth: true,\n      type: \"date\",\n      label: \"Deadline\",\n      inputRef: deadlineRef,\n      margin: \"normal\",\n      InputLabelProps: {\n        shrink: true\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: handleCreateTask,\n      sx: {\n        mt: 2\n      },\n      children: \"Create Task\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Typography, {\n      color: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 3\n  }, this);\n  const TaskList = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      children: isAdmin() ? \"All Tasks\" : \"My Tasks\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      item: true,\n      xs: 12,\n      md: isAdmin() ? 6 : 12,\n      sx: !isAdmin() ? {\n        marginTop: 4\n      } : {},\n      wrap: \"wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        style: {\n          display: 'flex'\n        },\n        children: tasks.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n          children: \"No tasks available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 9\n        }, this) : tasks.map(task => /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            mb: 2,\n            mr: isAdmin() ? 9 : 2,\n            minWidth: 275,\n            backgroundColor: getCardColor(task.deadline, task.status)\n          },\n          children: [/*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: task.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              children: task.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"Status: \", task.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                color: isDeadlinePassed(task.deadline) && task.status !== \"COMPLETED\" ? 'error.main' : 'inherit'\n              },\n              children: [\"Deadline: \", new Date(task.deadline).toLocaleDateString(), isDeadlineApproaching(task.deadline) && task.status !== \"COMPLETED\" && \" (Approaching!)\", isDeadlinePassed(task.deadline) && task.status !== \"COMPLETED\" && \" (Overdue!)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), isAdmin() && /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"Assignee: \", task.assignee]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), isAdmin() && /*#__PURE__*/_jsxDEV(CardActions, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"success\",\n              onClick: () => handleUpdateTask(task.TaskID, \"COMPLETED\"),\n              children: \"Mark as Completed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"warning\",\n              onClick: () => handleUpdateTask(task.TaskID, \"IN_PROGRESS\"),\n              children: \"Mark as In Progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"error\",\n              onClick: () => handleDeleteTask(task.TaskID),\n              children: \"Delete Task\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this)]\n        }, task.TaskID, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n  if (auth.isLoading) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 12\n    }, this);\n  }\n  if (auth.isAuthenticated) {\n    var _auth$user5;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(AppBar, {\n        position: \"static\",\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            sx: {\n              flexGrow: 1\n            },\n            children: [\"Task Management App (\", userRole, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"inherit\",\n            onClick: () => auth.removeUser(),\n            children: \"Sign Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        sx: {\n          mt: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          children: [\"Welcome, \", (_auth$user5 = auth.user) === null || _auth$user5 === void 0 ? void 0 : _auth$user5.profile[\"cognito:username\"]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [isAdmin() && /*#__PURE__*/_jsxDEV(AdminTaskCreation, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(TaskList, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          sx: {\n            mt: 2\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n          open: showNotification,\n          autoHideDuration: 6000,\n          onClose: () => setShowNotification(false),\n          anchorOrigin: {\n            vertical: 'bottom',\n            horizontal: 'right'\n          },\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            onClose: () => setShowNotification(false),\n            severity: \"warning\",\n            sx: {\n              width: '100%'\n            },\n            children: notificationMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            flexGrow: 1\n          },\n          children: \"Task Management App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"inherit\",\n          onClick: () => auth.signinRedirect(),\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        mt: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"Please sign in to manage tasks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 486,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"oWOaOe4DZV+vtmI57A5ARN4njjE=\", false, function () {\n  return [useAuth];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useState","useEffect","axios","TaskForm","useAuth","Alert","Snackbar","LandingPage","AppBar","Toolbar","Typography","Button","Container","TextField","Grid","Card","CardContent","CardActions","Select","MenuItem","FormControl","InputLabel","jsxDEV","_jsxDEV","App","_s","auth","tasks","setTasks","users","setUsers","userRole","setUserRole","newTask","setNewTask","title","description","assignee","deadline","status","error","setError","teamMembers","setTeamMembers","API_URLS","fetchTask","createTask","updateTask","deleteTask","fetchUsers","sendNotification","isAuthenticated","fetchUserRole","fetchTasks","isAdmin","_auth$user","username","user","profile","console","log","titleRef","descriptionRef","assigneeRef","deadlineRef","_auth$user2","response","get","headers","Authorization","access_token","data","err","notifications","setNotifications","showNotification","setShowNotification","notificationMessage","setNotificationMessage","isDeadlineApproaching","deadlineDate","Date","today","diffTime","diffDays","Math","ceil","isDeadlinePassed","getCardColor","sendDeadlineNotification","task","post","email","taskTitle","message","toLocaleDateString","_auth$user3","_auth$user4","token","url","URL","fetch","ok","Error","json","userEmail","relevantTasks","filter","approachingDeadlines","length","fetchTeamMembers","members","handleCreateTask","current","value","handleUpdateTask","taskId","newStatus","put","id","updatedTask","prevTasks","map","TaskID","notifyTask","method","body","JSON","stringify","result","handleDeleteTask","delete","AdminTaskCreation","item","xs","md","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","fullWidth","label","inputRef","margin","defaultValue","type","InputLabelProps","shrink","color","onClick","sx","mt","TaskList","style","gutterBottom","marginTop","wrap","className","display","mb","mr","minWidth","backgroundColor","isLoading","_auth$user5","position","flexGrow","removeUser","container","spacing","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","width","signinRedirect","_c","$RefreshReg$"],"sources":["/home/user/Task-Manager/task-manager-frontend/src/App.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport './index.css'\nimport TaskForm from './components/TaskForm.js'\nimport { useAuth } from \"react-oidc-context\";\nimport { Alert, Snackbar } from \"@mui/material\";\nimport LandingPage from './components/LandingPage.js'// Add these imports\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Button,\n  Container,\n  TextField,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n} from \"@mui/material\";\n\nfunction App() {\n  const auth = useAuth();\n  const [tasks, setTasks] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [userRole, setUserRole] = useState('');\n  const [newTask, setNewTask] = useState({\n    title: \"\",\n    description: \"\",\n    assignee: \"\",\n    deadline: \"\",\n    status: \"PENDING\"\n  });\n  const [error, setError] = useState(\"\");\n  const [teamMembers, setTeamMembers] = useState([]);\n\n  const API_URLS = {\n    fetchTask: \"https://71aos5nio2.execute-api.eu-west-1.amazonaws.com/getTask\",\n    createTask: \"https://plaaw9qjn7.execute-api.eu-west-1.amazonaws.com/createTask\",\n    updateTask: \"https://rlyzlu0dl0.execute-api.eu-west-1.amazonaws.com/updateTask\",\n    deleteTask: \"https://1b4916boze.execute-api.eu-west-1.amazonaws.com/delete\",\n    fetchUsers: \"https://your-api-url/getUsers\",\n    sendNotification: \"https://yjja5gnwql.execute-api.eu-west-1.amazonaws.com/sendNotification\"\n  };\n\n  useEffect(() => {\n    if (auth.isAuthenticated) {\n      fetchUserRole();\n      fetchTasks();\n      if (isAdmin()) {\n        fetchUsers();\n      }\n    }\n  }, [auth.isAuthenticated]);\n\n  const fetchUserRole = () => {\n  // In a real application, the username and roles would typically come from your authentication system.\n  const username = auth.user?.profile[\"cognito:username\"];\n  \n  if (username === \"admin\") {\n    // Assign 'ADMIN' role if username matches 'admin'\n    setUserRole(\"ADMIN\");\n    console.log(\"Logged in as admin\");\n  } else {\n    // Default to 'MEMBER' role otherwise\n    setUserRole(\"MEMBER\");\n    console.log(\"Logged in as a normal user without admin privileges\");\n  }\n};\n\n\n\n  const titleRef = useRef();\n  const descriptionRef = useRef();\n  const assigneeRef = useRef();\n  const deadlineRef = useRef();\n\nconst isAdmin = () => userRole === 'ADMIN';\n\nconst fetchUsers = async () => {\n  try {\n    const response = await axios.get(API_URLS.fetchUsers, {\n      headers: { Authorization: `Bearer ${auth.user?.access_token}` },\n    });\n    setUsers(response.data);\n  } catch (err) {\n    setError(\"Failed to fetch users\");\n  }\n};\n\n\n\n    // Add new state for notifications\n  const [notifications, setNotifications] = useState([]);\n  const [showNotification, setShowNotification] = useState(false);\n  const [notificationMessage, setNotificationMessage] = useState(\"\");\n\n  // Function to check if a deadline is approaching (within 3 days)\n  const isDeadlineApproaching = (deadline) => {\n    const deadlineDate = new Date(deadline);\n    const today = new Date();\n    const diffTime = deadlineDate - today;\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays <= 3 && diffDays >= 0;\n  };\n\n  // Function to check if a deadline has passed\n  const isDeadlinePassed = (deadline) => {\n    const deadlineDate = new Date(deadline);\n    const today = new Date();\n    return deadlineDate < today;\n  };\n\n  // Function to get card background color based on deadline\n  const getCardColor = (deadline, status) => {\n    if (status === \"COMPLETED\") return \"#e8f5e9\"; // Light green for completed tasks\n    if (isDeadlinePassed(deadline)) return \"#ffebee\"; // Red for passed deadline\n    if (isDeadlineApproaching(deadline)) return \"#fff3e0\"; // Orange for approaching deadline\n    return \"white\"; // Default color\n  };\n\n\n   // Function to send email notification via SNS\n  const sendDeadlineNotification = async (task) => {\n    try {\n      const response = await axios.post(API_URLS.sendNotification, {\n        email: task.assignee,\n        taskTitle: task.title,\n        deadline: task.deadline,\n        message: `Task \"${task.title}\" is due on ${new Date(task.deadline).toLocaleDateString()}. Please complete it soon.`\n      });\n      console.log(\"Notification sent successfully:\", response.data);\n    } catch (error) {\n      console.error(\"Failed to send notification:\", error);\n      setError(\"Failed to send email notification\");\n    }\n  };\n\n   const fetchTasks = async () => {\n    try {\n      const token = auth.user?.access_token;\n      const url = new URL(API_URLS.fetchTask);\n      \n      const response = await fetch(url);\n\n      if (!response.ok) {\n        throw new Error(`Error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      \n      // Filter tasks based on user role and assignee\n      const userEmail = auth.user?.profile.email;\n      const relevantTasks = isAdmin() ? data : data.filter(task => task.assignee === userEmail);\n      \n      // Check for approaching deadlines and send notifications\n      const approachingDeadlines = relevantTasks.filter(\n        task => isDeadlineApproaching(task.deadline) && task.status !== \"COMPLETED\"\n      );\n\n      // Send email notifications for approaching deadlines\n      for (const task of approachingDeadlines) {\n        await sendDeadlineNotification(task);\n      }\n\n      // Set UI notifications\n      if (approachingDeadlines.length > 0) {\n        setNotificationMessage(`You have ${approachingDeadlines.length} task(s) with approaching deadlines! Check your email for details.`);\n        setShowNotification(true);\n      }\n\n      setTasks(relevantTasks);\n    } catch (err) {\n      console.log(err);\n      setError(err.message || \"Failed to fetch tasks\");\n    }\n  };\n\nconst fetchTeamMembers = async () => {\n        try {\n            const response = await fetch('https://vwjwg4yut4.execute-api.eu-west-1.amazonaws.com/user');\n            if (!response.ok) {\n                throw new Error('Failed to fetch team members');\n            }\n            const data = await response.json();\n            console.log(data)\n            console.log(data.users)\n            const members = data.users.filter((user) => user);\n            console.log({members})\n            setTeamMembers(members);\n        } catch (error) {\n            setError(error.message);\n        }\n    };\n\n   const handleCreateTask = async () => {\n    if (!isAdmin()) return;\n\n    const newTask = {\n      title: titleRef.current.value,\n      description: descriptionRef.current.value,\n      assignee: assigneeRef.current.value,\n      deadline: deadlineRef.current.value,\n      status: \"PENDING\",\n    };\n\n    try {\n      const response = await axios.post(API_URLS.createTask, newTask, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      setError(\"\");\n      console.log(\"Task created:\", response.data);\n      // Refresh tasks after creating a new one\n      fetchTasks();\n    } catch (err) {\n      setError(\"Failed to create task\");\n    }\n  };\n  const handleUpdateTask = async (taskId, newStatus) => {\n  if (!isAdmin()) return;\n\n  try {\n    const response = await axios.put(\n      API_URLS.updateTask, // Use TaskID query parameter\n      { status: newStatus,id:taskId }, // Payload matches Lambda's expected structure\n      {\n        headers: { \n          \"Content-Type\": \"application/json\",\n          //Authorization: `Bearer ${auth.user?.access_token}`\n        }\n      }\n    );\n\n    const updatedTask = response.data;\n      console.log(updatedTask)\n\n    // Update task state with the new values\n    setTasks((prevTasks) =>\n      prevTasks.map((task) =>\n        task.TaskID === taskId ? { ...task, ...updatedTask } : task\n      )\n    );\n\n    console.log(\"Task successfully updated:\", updatedTask);\n  } catch (err) {\n    console.error(\"Failed to update task:\", err.message);\n    setError(\"Failed to update task\");\n  }\n};\n\n\n  const notifyTask = async (data) => {\n  const response = await fetch(\"https://efd8swtncb.execute-api.eu-west-1.amazonaws.com/notify\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  });\n  const result = await response.json();\n  console.log(result);\n};\n\n// Example usage:\n\n\n\n\n  const handleDeleteTask = async (taskId) => {\n  if (!isAdmin()) return;\n  try {\n    await axios.delete(API_URLS.deleteTask, {\n        data:{TaskID:taskId},\n        headers: { \"Content-Type\": \"application/json\" },\n    });\n    setTasks((prevTasks) => prevTasks.filter((task) => task.TaskID !== taskId));\n  } catch (err) {\n    console.error(err);  // Log the error for debugging\n    setError(\"Failed to delete task\");\n  }\n};\n\n    useEffect(() => {\n        fetchTeamMembers();\n    }, []);\n\n  const AdminTaskCreation = () => (\n    \n  <Grid item xs={12} md={6}>\n      <Typography variant=\"h5\">Create Task</Typography>\n\n      {/* Title Input */}\n      <TextField\n        fullWidth\n        label=\"Title\"\n        inputRef={titleRef}\n        margin=\"normal\"\n      />\n\n      {/* Description Input */}\n      <TextField\n        fullWidth\n        label=\"Description\"\n        inputRef={descriptionRef}\n        margin=\"normal\"\n      />\n\n      {/* Assignee Select */}\n      <FormControl fullWidth margin=\"normal\">\n        <InputLabel>Assignee</InputLabel>\n        <Select\n          inputRef={assigneeRef}\n          defaultValue=\"\"\n        >\n          {teamMembers.map((user) => (\n            <MenuItem key={user.email} value={user.email}>\n              {user.email}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n\n      {/* Deadline Input */}\n      <TextField\n        fullWidth\n        type=\"date\"\n        label=\"Deadline\"\n        inputRef={deadlineRef}\n        margin=\"normal\"\n        InputLabelProps={{ shrink: true }}\n      />\n\n      {/* Create Task Button */}\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleCreateTask}\n        sx={{ mt: 2 }}\n      >\n        Create Task\n      </Button>\n\n      {/* Error Message */}\n      {error && <Typography color=\"error\">{error}</Typography>}\n    </Grid>\n);\n\n\n  const TaskList = () => (\n    <div style={{ margin: '20px'}}>\n      <Typography variant=\"h5\" gutterBottom>\n        {isAdmin() ? \"All Tasks\" : \"My Tasks\"}\n      </Typography>\n\n    <div\n      item\n      xs={12}\n      md={isAdmin() ? 6 : 12}\n      sx={!isAdmin() ? { marginTop: 4 }: {}}\n      \n      wrap=\"wrap\"\n    >\n      <div className=\"\" style={{ display: 'flex'}}>\n      {tasks.length === 0 ? (\n        <Typography>No tasks available</Typography>\n      ) : (\n        tasks.map((task) => (\n          <Card\n            key={task.TaskID}\n            sx={{ \n              mb: 2, \n              mr: isAdmin() ? 9 : 2, \n              minWidth: 275,\n              backgroundColor: getCardColor(task.deadline, task.status)\n            }}\n          >\n            <CardContent>\n              <Typography variant=\"h6\">{task.title}</Typography>\n              <Typography>{task.description}</Typography>\n              <Typography>Status: {task.status}</Typography>\n              <Typography \n                sx={{ \n                  color: isDeadlinePassed(task.deadline) && task.status !== \"COMPLETED\" ? 'error.main' : 'inherit'\n                }}\n              >\n                Deadline: {new Date(task.deadline).toLocaleDateString()}\n                {isDeadlineApproaching(task.deadline) && task.status !== \"COMPLETED\" && \n                  \" (Approaching!)\"}\n                {isDeadlinePassed(task.deadline) && task.status !== \"COMPLETED\" && \n                  \" (Overdue!)\"}\n              </Typography>\n              {isAdmin() && <Typography>Assignee: {task.assignee}</Typography>}\n            </CardContent>\n            {isAdmin() && (\n              <CardActions>\n                <Button\n                  variant=\"contained\"\n                  color=\"success\"\n                  onClick={() => handleUpdateTask(task.TaskID, \"COMPLETED\")}\n                >\n                  Mark as Completed\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  color=\"warning\"\n                  onClick={() => handleUpdateTask(task.TaskID, \"IN_PROGRESS\")}\n                >\n                  Mark as In Progress\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  color=\"error\"\n                  onClick={() => handleDeleteTask(task.TaskID)}\n                >\n                  Delete Task\n                </Button>\n              </CardActions>\n            )}\n          </Card>\n        ))\n      )}\n      </div>\n     \n      \n    </div>\n    </div>\n    \n  );\n\n\n  if (auth.isLoading) {\n    return <Typography variant=\"h6\">Loading...</Typography>;\n  }\n\n  \n  if (auth.isAuthenticated) {\n    return (\n      <div>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\" sx={{ flexGrow: 1 }}>\n              Task Management App ({userRole})\n            </Typography>\n            <Button color=\"inherit\" onClick={() => auth.removeUser()}>\n              Sign Out\n            </Button>\n          </Toolbar>\n        </AppBar>\n        <Container sx={{ mt: 4 }}>\n          <Typography variant=\"h4\" gutterBottom>\n            Welcome, {auth.user?.profile[\"cognito:username\"]}\n          </Typography>\n          <Grid container spacing={2}>\n            {isAdmin() && <AdminTaskCreation />}\n            <TaskList />\n          </Grid>\n          {error && (\n            <Typography color=\"error\" sx={{ mt: 2 }}>\n              {error}\n            </Typography>\n          )}\n          <Snackbar\n            open={showNotification}\n            autoHideDuration={6000}\n            onClose={() => setShowNotification(false)}\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n          >\n            <Alert \n              onClose={() => setShowNotification(false)} \n              severity=\"warning\" \n              sx={{ width: '100%' }}\n            >\n              {notificationMessage}\n            </Alert>\n          </Snackbar>\n        </Container>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" sx={{ flexGrow: 1 }}>\n            Task Management App\n          </Typography>\n          <Button color=\"inherit\" onClick={() => auth.signinRedirect()}>\n            Sign In\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <Container sx={{ mt: 4 }}>\n        <Typography variant=\"h5\">Please sign in to manage tasks</Typography>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}